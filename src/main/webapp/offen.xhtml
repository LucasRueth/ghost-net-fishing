<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" media="screen" href="style.css"/>
    <title>Offene Geisternetze</title>
</h:head>

<h:body>
    <h1>Offene Geisternetze</h1>

    <h:form>
        <h:dataTable value="#{geisternetzController.offeneNetze}" var="n" border="1">
            <h:column>
                <f:facet name="header">ID</f:facet>
                #{n.id}
            </h:column>

            <h:column>
                <f:facet name="header">Koordinaten</f:facet>
                #{n.breitengrad}, #{n.laengengrad}
            </h:column>

            <h:column>
                <f:facet name="header">Größe</f:facet>
                #{n.groesse}
            </h:column>

            <h:column>
                <f:facet name="header">Status</f:facet>
                #{n.status}
            </h:column>

            <h:column>
                <f:facet name="header">Aktionen</f:facet>

                <h:panelGroup rendered="#{n.status eq 'GEMELDET'}">
                    <h:commandButton value="Bergung übernehmen"
                                     action="#{geisternetzController.setAusgewaehltesNetzId(n.id)}" />
                </h:panelGroup>

                <h:panelGroup rendered="#{n.status eq 'BERGUNG_BEVORSTEHEND'}">
                    <h:commandButton value="Als geborgen"
                                     action="#{geisternetzController.alsGeborgenMelden(n.id)}" />
                    <h:commandButton value="Als verschollen"
                                     action="#{geisternetzController.alsVerschollenMelden(n.id)}" />
                </h:panelGroup>

            </h:column>
        </h:dataTable>

        <h:panelGroup rendered="#{not empty geisternetzController.ausgewaehltesNetzId}">
            <h2>Bergung übernehmen</h2>
            <h:panelGrid columns="2">
                <h:outputLabel value="Name:" for="bname"/>
                <h:inputText id="bname" value="#{geisternetzController.bergungName}" />

                <h:outputLabel value="Telefon:" for="btel"/>
                <h:inputText id="btel" value="#{geisternetzController.bergungTelefon}" />
            </h:panelGrid>

            <p>
                <h:commandButton value="Speichern"
                                 action="#{geisternetzController.uebernehmeBergung()}" />
            </p>
        </h:panelGroup>

        <p>
            <h:link value="Zur Startseite" outcome="index.xhtml" />
        </p>

        <h:messages style="color:red;" />
    </h:form>

</h:body>
</html>
